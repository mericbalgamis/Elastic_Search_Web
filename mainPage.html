<!DOCTYPE html>
<html lang="en">
<head>
    <title>Query Editor</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="style.css">


</head>

<body>

<form>
    Select query
    <select id="list" onclick="queries()">
        <option>Match Query</option>
        <option>Match Phrase Query</option>
        <option>Match Phrase Prefix Query</option>
        <option>Match Boolean Prefix Query</option>
        <option>Multi Match Query</option>
        <option>Common Terms Query</option>
        <option>Query String Query</option>
    </select>

</form>

<div class="inline-div">
    <p align="center">Build a Query ! </p>
    <textarea id="myTextArea" onchange="prettyPrint()" cols="100" rows="300" class="inline-txtarea"></textarea>
</div>
<div class="inline-div">
    <p align="center">Here is the Result</p>
    <textarea id="resultArea" cols="100" rows="300" class="inline-txtarea"></textarea>
</div>

<div>
    <button onclick=httpGet("http://127.0.0.1:5000/query")>Run Query</button>
</div>

<script type="text/javascript">

    function prettyPrint() {
        console.log("girdi");
        var ugly = document.getElementById("myTextArea").value;
        console.log(document.getElementById("myTextArea").value);
        const obj = JSON.parse(ugly);
        const pretty = JSON.stringify(obj, undefined, 4);
        document.getElementById("myTextArea").value = pretty;
    }

    function httpGet(theUrl)
    {
        var str = document.getElementById("myTextArea").value;
        var data = JSON.parse(str);
        $.ajax({
            url: theUrl,
            type: 'POST',
            data: JSON.stringify(data),
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            async: false,
            success: function(msg) {
                console.log(msg);
                document.getElementById("resultArea").value=JSON.stringify(msg['hits']['hits'],null,2);
            }
        });
    }

    function queries(){

        var querySelected=document.getElementById("list").selectedIndex;
        console.log(querySelected);
        if(querySelected == 0){
            var jsonObject = JSON.parse('{"query": {"match" : {"message" : "this is a test"}}}');
            document.getElementById("myTextArea").value = JSON.stringify(jsonObject, undefined, 4);
        }
        else if(querySelected == 1){
            var jsonObject = JSON.parse('{"query": {"match_phrase" : {"message" : "this is a test"}}}');
            document.getElementById("myTextArea").value = JSON.stringify(jsonObject, undefined, 4);
        }
        else if(querySelected == 2){
            var jsonObject = JSON.parse('{"query": {"match_phrase_prefix" : {"message" : "this is a test"}}}');
            document.getElementById("myTextArea").value = JSON.stringify(jsonObject, undefined, 4);
        }
        else if(querySelected == 3){
            var jsonObject = JSON.parse('{"query": {"match_boolean_prefix_query" : {"message" : "this is a test"}}}');
            document.getElementById("myTextArea").value = JSON.stringify(jsonObject, undefined, 4);
        }
        else if(querySelected == 4){
            var jsonObject = JSON.parse('{"query": {"multi_match_query" : {"message" : "this is a test"}}}');
            document.getElementById("myTextArea").value = JSON.stringify(jsonObject, undefined, 4);
        }
        else if(querySelected == 5){
            var jsonObject = JSON.parse('{"query": {"common_terms_query" : {"message" : "this is a test"}}}');
            document.getElementById("myTextArea").value = JSON.stringify(jsonObject, undefined, 4);
        }
        else if(querySelected == 6){
            var jsonObject = JSON.parse('{"query": {"query_string_query" : {"message" : "this is a test"}}}');
            document.getElementById("myTextArea").value = JSON.stringify(jsonObject, undefined, 4);
        }
    }

</script>

</body>
</html>